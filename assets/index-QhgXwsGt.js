(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function s(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(t){if(t.ep)return;t.ep=!0;const c=s(t);fetch(t.href,c)}})();const A=[{name:"Happy Mask Salesman",id:0,relations:[{personId:0,otherPersonId:1,description:"assigns a mask retrieval mission to"},{personId:0,otherPersonId:2,description:"was mugged by"}]},{name:"Link",id:1,relations:[{personId:1,otherPersonId:0,description:"receives a mask retrieval mission from the"},{personId:1,otherPersonId:3,description:"is begrudgingly accompanied by"},{personId:1,otherPersonId:84,description:"is given the Stone Mask by"},{personId:1,otherPersonId:12,description:"infiltrates the hideout of"},{personId:1,otherPersonId:15,description:"brings inspiration to"},{personId:1,otherPersonId:16,description:"brings inspiration to"},{personId:1,otherPersonId:18,description:"heals the soul of"},{personId:1,otherPersonId:48,description:"heals the soul of"},{personId:1,otherPersonId:49,description:"heals the soul of"},{personId:1,otherPersonId:50,description:"takes the form of"},{personId:1,otherPersonId:51,description:"heals the soul of"},{personId:1,otherPersonId:6,description:"infiltrates Sakon's hideout with"},{personId:1,otherPersonId:63,description:"is given a quiz by"},{personId:1,otherPersonId:21,description:"defeats"},{personId:1,otherPersonId:23,description:"serves as a detective for"},{personId:1,otherPersonId:27,description:"is given the bunny hood by the"},{personId:1,otherPersonId:29,description:"frees"},{personId:1,otherPersonId:30,description:"is recruited by"},{personId:1,otherPersonId:34,description:"is challenged to a race by the"},{personId:1,otherPersonId:41,description:"buys maps from"},{personId:1,otherPersonId:40,description:"is taught the Song of Soaring by"},{personId:1,otherPersonId:46,description:"is sold magic beans by the"},{personId:1,otherPersonId:47,description:"banks with the"},{personId:1,otherPersonId:68,description:"impersonates"},{personId:1,otherPersonId:69,description:"gives paper to"},{personId:1,otherPersonId:74,description:"is forged new swords by"},{personId:1,otherPersonId:75,description:"commissions new swords from"},{personId:1,otherPersonId:80,description:"bets on a dog race run by"},{personId:1,otherPersonId:81,description:"speeds up the growth of chicks owned by"},{personId:1,otherPersonId:79,description:"races the"},{personId:1,otherPersonId:83,description:"dismisses"},{personId:1,otherPersonId:85,description:"is prevented from entering Ikana Canyon by"}]},{name:"Skull Kid",id:2,relations:[{personId:2,otherPersonId:0,description:"stole an ancient cursed mask from the"},{personId:2,otherPersonId:3,description:"used to be friends with"},{personId:2,otherPersonId:4,description:"used to be friends with"},{personId:2,otherPersonId:6,description:"has set a curse on"},{personId:2,otherPersonId:31,description:"is a former member of the"},{personId:2,otherPersonId:28,description:"is possessed by"},{personId:2,otherPersonId:29,description:"believes he was betrayed by"},{personId:2,otherPersonId:62,description:"has set a curse on"}]},{name:"Tatl",id:3,relations:[{personId:3,otherPersonId:2,description:"used to be friends with"},{personId:3,otherPersonId:1,description:"begrudgingly accompanies"},{personId:3,otherPersonId:4,description:"is sister to"}]},{name:"Tael",id:4,relations:[{personId:4,otherPersonId:3,description:"is the brother of"},{personId:4,otherPersonId:2,description:"used to be friends with"}]},{name:"Anju",id:5,relations:[{personId:5,otherPersonId:6,description:"is engaged to"},{personId:5,otherPersonId:10,description:"is friends with"},{personId:5,otherPersonId:9,description:"is the daughter of"},{personId:5,otherPersonId:8,description:"is the granddaughter of"},{personId:5,otherPersonId:7,description:"is the daughter of"},{personId:5,otherPersonId:27,description:"receives a letter from the"},{personId:5,otherPersonId:68,description:"accepts custom from"}]},{name:"Kafei",id:6,relations:[{personId:6,otherPersonId:5,description:"is engaged to"},{personId:6,otherPersonId:2,description:"was transformed into a child by"},{personId:6,otherPersonId:31,description:"is a former member of the"},{personId:6,otherPersonId:7,description:"is believed to have run off with Cremia by"},{personId:6,otherPersonId:11,description:"is being sheltered by"},{personId:6,otherPersonId:12,description:"had his wedding mask stolen by"},{personId:6,otherPersonId:1,description:"infiltrates Sakon's hideout with"},{personId:6,otherPersonId:22,description:"is the son of"},{personId:6,otherPersonId:23,description:"is the son of"},{personId:6,otherPersonId:27,description:"receives a letter from the"}]},{name:"Anju's mother",id:7,relations:[{personId:7,otherPersonId:8,description:"is the daughter-in-law of"},{personId:7,otherPersonId:5,description:"is mother to"},{personId:7,otherPersonId:9,description:"was wife to"},{personId:7,otherPersonId:10,description:"believes Kafei ran off with"},{personId:7,otherPersonId:6,description:"believes Cremia ran off with"}]},{name:"Anju's grandmother",id:8,relations:[{personId:8,otherPersonId:5,description:"is grandmother to"},{personId:8,otherPersonId:9,description:"was mother to"},{personId:8,otherPersonId:7,description:"is the mother-in-law of"},{personId:8,otherPersonId:22,description:"was a teacher of"}]},{name:"Tortus",id:9,relations:[{personId:9,otherPersonId:5,description:"was the father of"},{personId:9,otherPersonId:8,description:"was the son of"},{personId:9,otherPersonId:7,description:"was the husband of"}]},{name:"Cremia",id:10,relations:[{personId:10,otherPersonId:5,description:"is friends with"},{personId:10,otherPersonId:7,description:"is believed to have run off with Kafei by"},{personId:10,otherPersonId:19,description:"is terrorised by the"},{personId:10,otherPersonId:21,description:"had her cows stolen by"},{personId:10,otherPersonId:20,description:"is the older sister of"}]},{name:"Curiosity Shop Owner",id:11,relations:[{personId:11,otherPersonId:6,description:"offers protection to"},{personId:11,otherPersonId:12,description:"is reluctant to purchase goods from"},{personId:11,otherPersonId:43,description:"employs the"}]},{name:"Sakon",id:12,relations:[{personId:12,otherPersonId:11,description:"feels he is being ripped off by"},{personId:12,otherPersonId:6,description:"has stolen a wedding mask from"},{personId:12,otherPersonId:1,description:"has his hideout infiltrated by"},{personId:12,otherPersonId:45,description:"steals the bomb bag from the"}]},{name:"Gorman",id:13,relations:[{personId:13,otherPersonId:14,description:"leads a circus troupe employing"},{personId:13,otherPersonId:15,description:"leads a circus troupe employing"},{personId:13,otherPersonId:16,description:"leads a circus troupe employing"},{personId:13,otherPersonId:17,description:"leads a circus troupe employing"},{personId:13,otherPersonId:19,description:"is the third brother to the two"},{personId:13,otherPersonId:23,description:"has his act cancelled by"},{personId:13,otherPersonId:26,description:"drinks at the establishment of"}]},{name:"Guru-Guru",id:14,relations:[{personId:14,otherPersonId:13,description:"is in a circus troupe led by"}]},{name:"Judo Rosa",id:15,relations:[{personId:15,otherPersonId:13,description:"is a dancer in a circus troupe led by"},{personId:15,otherPersonId:16,description:"is the twin sister of"},{personId:15,otherPersonId:1,description:"is inspired by a dance performance from"}]},{name:"Marilla Rosa",id:16,relations:[{personId:16,otherPersonId:13,description:"is a dancer in a circus troupe led by"},{personId:16,otherPersonId:15,description:"is the twin sister of"},{personId:16,otherPersonId:1,description:"is inspired by a dance performance from"}]},{name:"Twin Jugglers",id:17,relations:[{personId:17,otherPersonId:13,description:"juggle for a circus troupe led by"}]},{name:"Kamaro",id:18,relations:[{personId:18,otherPersonId:1,description:"is healed by"}]},{name:"Gorman Bros.",id:19,relations:[{personId:19,otherPersonId:13,description:"are the other two brothers of"},{personId:19,otherPersonId:10,description:"are terrorising"}]},{name:"Romani",id:20,relations:[{personId:20,otherPersonId:21,description:"is temporarily abducted by"},{personId:20,otherPersonId:10,description:"is the younger sister of"}]},{name:"the Aliens",id:21,relations:[{personId:21,otherPersonId:20,description:"temporarily abduct"},{personId:21,otherPersonId:10,description:"are stealing cows from"},{personId:21,otherPersonId:1,description:"are defeated by"}]},{name:"Mayor Dotour",id:22,relations:[{personId:22,otherPersonId:8,description:"was taught by"},{personId:22,otherPersonId:6,description:"is father to"},{personId:22,otherPersonId:23,description:"is husband to"},{personId:22,otherPersonId:24,description:"is advised by"},{personId:22,otherPersonId:25,description:"is continually berated by"},{personId:22,otherPersonId:71,description:"employs"}]},{name:"Madame Aroma",id:23,relations:[{personId:23,otherPersonId:6,description:"is mother to"},{personId:23,otherPersonId:22,description:"is wife to"},{personId:23,otherPersonId:13,description:"regretfully cancels the act of"},{personId:23,otherPersonId:26,description:"drinks at the establishment of"},{personId:23,otherPersonId:1,description:"requests help from"},{personId:23,otherPersonId:27,description:"employs the"},{personId:23,otherPersonId:59,description:"is in carnival-related talks with"},{personId:23,otherPersonId:71,description:"employs"}]},{name:"Viscen",id:24,relations:[{personId:24,otherPersonId:22,description:"is advisor to"}]},{name:"Mutoh",id:25,relations:[{personId:25,otherPersonId:22,description:"continually berates"},{personId:25,otherPersonId:64,description:"is father to"},{personId:25,otherPersonId:65,description:"is father to"},{personId:25,otherPersonId:66,description:"employs"}]},{name:"Mr Barten",id:26,relations:[{personId:26,otherPersonId:13,description:"serves"},{personId:26,otherPersonId:23,description:"serves"}]},{name:"Postman",id:27,relations:[{personId:27,otherPersonId:5,description:"delivers a letter to"},{personId:27,otherPersonId:6,description:"delivers a letter to"},{personId:27,otherPersonId:23,description:"is employed by"},{personId:27,otherPersonId:27,description:"delivers a letter to"},{personId:27,otherPersonId:1,description:"gives the bunny hood to"}]},{name:"Majora",id:28,relations:[{personId:28,otherPersonId:2,description:"possesses"}]},{name:"the Four Giants",id:29,relations:[{personId:29,otherPersonId:2,description:"still consider themselves friends to"},{personId:29,otherPersonId:1,description:"are freed by"}]},{name:"Jim",id:30,relations:[{personId:30,otherPersonId:1,description:"recruits"},{personId:30,otherPersonId:31,description:"is the leader of the"}]},{name:"the Bombers",id:31,relations:[{personId:31,otherPersonId:6,description:"formerly included"},{personId:31,otherPersonId:2,description:"formerly included"},{personId:31,otherPersonId:30,description:"are led by"},{personId:31,otherPersonId:32,description:"know"}]},{name:"Professor Shikashi",id:32,relations:[{personId:32,otherPersonId:31,description:"is familiar with"}]},{name:"Deku King",id:33,relations:[{personId:33,otherPersonId:35,description:"is the father of"},{personId:33,otherPersonId:34,description:"employs the"},{personId:33,otherPersonId:36,description:"imprisons the"}]},{name:"Deku Butler",id:34,relations:[{personId:34,otherPersonId:1,description:"is reminded of his son by"},{personId:34,otherPersonId:50,description:"is the father of"},{personId:34,otherPersonId:33,description:"works for the"}]},{name:"Deku Princess",id:35,relations:[{personId:35,otherPersonId:33,description:"is the daughter of"},{personId:35,otherPersonId:36,description:"is falsely assumed to have been kidnapped by"}]},{name:"Monkey",id:36,relations:[{personId:36,otherPersonId:33,description:"is currently imprisoned by"},{personId:36,otherPersonId:35,description:"is accused of kidnapping the"},{personId:36,otherPersonId:37,description:"is friends with his fellow"}]},{name:"Monkeys",id:37,relations:[{personId:37,otherPersonId:36,description:"want to rescue their friend,"},{personId:37,otherPersonId:38,description:"know the route through the woods to"}]},{name:"Koume",id:38,relations:[{personId:38,otherPersonId:42,description:"works in the Swamp Tourist Center with"},{personId:38,otherPersonId:39,description:"is the sister of"},{personId:38,otherPersonId:37,description:"is stranded at a location known only by the"}]},{name:"Kotake",id:39,relations:[{personId:39,otherPersonId:38,description:"is the sister of"}]},{name:"Kaepora Gaebora",id:40,relations:[{personId:40,otherPersonId:1,description:"teaches the Song of Soaring to"}]},{name:"Tingle",id:41,relations:[{personId:41,otherPersonId:1,description:"sells maps to"},{personId:41,otherPersonId:42,description:"is the son of"}]},{name:"Tingle's father",id:42,relations:[{personId:42,otherPersonId:41,description:"is the father of"},{personId:42,otherPersonId:38,description:"works in the Swamp Tourist Center with"}]},{name:"Part-time worker",id:43,relations:[{personId:43,otherPersonId:11,description:"works for"}]},{name:"Bomb shop owner",id:44,relations:[{personId:44,otherPersonId:45,description:"is the son of"}]},{name:"Old lady from the bomb shop",id:45,relations:[{personId:45,otherPersonId:44,description:"is the mother of"},{personId:45,otherPersonId:12,description:"is mugged by"}]},{name:"Bean seller",id:46,relations:[{personId:46,otherPersonId:1,description:"sells magic beans to"}]},{name:"Banker",id:47,relations:[{personId:47,otherPersonId:1,description:"accepts custom from"}]},{name:"Mikau",id:48,relations:[{personId:48,otherPersonId:1,description:"is healed by"},{personId:48,otherPersonId:55,description:"is the partner of"},{personId:48,otherPersonId:70,description:"is father to the"},{personId:48,otherPersonId:56,description:"is the bandmate of"},{personId:48,otherPersonId:57,description:"is the bandmate of"},{personId:48,otherPersonId:58,description:"is the bandmate of"},{personId:48,otherPersonId:59,description:"is in a band managed by"},{personId:48,otherPersonId:60,description:"was mortally wounded by a group of pirates led by"}]},{name:"Darmani",id:49,relations:[{personId:49,otherPersonId:1,description:"is healed by"},{personId:49,otherPersonId:72,description:"is venerated by the"},{personId:49,otherPersonId:73,description:"is considered heroic by the"}]},{name:"the Deku Butler's son",id:50,relations:[{personId:50,otherPersonId:1,description:"is healed by"},{personId:50,otherPersonId:34,description:"is the son of the"}]},{name:"Pamela's father",id:51,relations:[{personId:51,otherPersonId:1,description:"is healed by"},{personId:51,otherPersonId:52,description:"is the father of"}]},{name:"Pamela",id:52,relations:[{personId:52,otherPersonId:51,description:"is the daughter of"}]},{name:"Honey",id:53,relations:[{personId:53,otherPersonId:54,description:"loves"}]},{name:"Darling",id:54,relations:[{personId:54,otherPersonId:53,description:"loves"}]},{name:"Lulu",id:55,relations:[{personId:55,otherPersonId:48,description:"is the partner of"},{personId:55,otherPersonId:56,description:"is the bandmate of"},{personId:55,otherPersonId:57,description:"is the bandmate of"},{personId:55,otherPersonId:58,description:"is the bandmate of"},{personId:55,otherPersonId:59,description:"is in a band managed by"},{personId:55,otherPersonId:70,description:"is mother to the"},{personId:55,otherPersonId:86,description:"musically summons the"}]},{name:"Evan",id:56,relations:[{personId:56,otherPersonId:55,description:"is the bandmate of"},{personId:56,otherPersonId:48,description:"is the bandmate of"},{personId:56,otherPersonId:57,description:"is the bandmate of"},{personId:56,otherPersonId:58,description:"is the bandmate of"},{personId:56,otherPersonId:59,description:"is in a band managed by"}]},{name:"Japas",id:57,relations:[{personId:57,otherPersonId:55,description:"is the bandmate of"},{personId:57,otherPersonId:56,description:"is the bandmate of"},{personId:57,otherPersonId:48,description:"is the bandmate of"},{personId:57,otherPersonId:58,description:"is the bandmate of"},{personId:57,otherPersonId:59,description:"is in a band managed by"}]},{name:"Tijo",id:58,relations:[{personId:58,otherPersonId:55,description:"is the bandmate of"},{personId:58,otherPersonId:56,description:"is the bandmate of"},{personId:58,otherPersonId:57,description:"is the bandmate of"},{personId:58,otherPersonId:48,description:"is the bandmate of"},{personId:58,otherPersonId:59,description:"is in a band managed by"}]},{name:"Toto",id:59,relations:[{personId:59,otherPersonId:55,description:"manages a band that includes"},{personId:59,otherPersonId:56,description:"manages a band that includes"},{personId:59,otherPersonId:57,description:"manages a band that includes"},{personId:59,otherPersonId:58,description:"manages a band that includes"},{personId:59,otherPersonId:48,description:"manages a band that includes"},{personId:59,otherPersonId:23,description:"is in carnival-related talks with"}]},{name:"Aveil",id:60,relations:[{personId:60,otherPersonId:70,description:"leads a group of pirates who stole Lulu's"},{personId:60,otherPersonId:48,description:"leads a group of pirates who have mortally wounded"},{personId:60,otherPersonId:76,description:"leads a pirate group obsessed over by the"}]},{name:"Flat",id:61,relations:[{personId:61,otherPersonId:62,description:"is the brother of"}]},{name:"Sharp",id:62,relations:[{personId:62,otherPersonId:61,description:"is the brother of"},{personId:62,otherPersonId:2,description:"was cursed to linger on as a ghost by"}]},{name:"Keaton",id:63,relations:[{personId:63,otherPersonId:1,description:"quizzes"}]},{name:"Bremor",id:64,relations:[{personId:64,otherPersonId:25,description:"is the son of"},{personId:64,otherPersonId:65,description:"is the brother of"}]},{name:"Brac",id:65,relations:[{personId:65,otherPersonId:25,description:"is the son of"},{personId:65,otherPersonId:64,description:"is the brother of"}]},{name:"Mack",id:66,relations:[{personId:66,otherPersonId:25,description:"works for"},{personId:66,otherPersonId:67,description:"supervises the"}]},{name:"Carpenters' apprentice",id:67,relations:[{personId:67,otherPersonId:66,description:"works for"}]},{name:"Link the Goron",id:68,relations:[{personId:68,otherPersonId:1,description:"is impersonated by"},{personId:68,otherPersonId:5,description:"stays at the inn managed by"}]},{name:"???",id:69,relations:[{personId:69,otherPersonId:1,description:"accepts paper from"}]},{name:"Zora eggs",id:70,relations:[{personId:70,otherPersonId:55,description:"are the children of"},{personId:70,otherPersonId:48,description:"are the children of"},{personId:70,otherPersonId:60,description:"were stolen by a group of pirates led by"},{personId:70,otherPersonId:82,description:"are incubated by the"}]},{name:"Receptionist",id:71,relations:[{personId:71,otherPersonId:22,description:"is the receptionist for"},{personId:71,otherPersonId:23,description:"is the receptionist for"}]},{name:"Goron Elder",id:72,relations:[{personId:72,otherPersonId:73,description:"is the father of"},{personId:72,otherPersonId:49,description:"venerates"}]},{name:"Goron Elder's son",id:73,relations:[{personId:73,otherPersonId:72,description:"is the son of"},{personId:73,otherPersonId:49,description:"idolises"}]},{name:"Gabora",id:74,relations:[{personId:74,otherPersonId:1,description:"forges new swords for"},{personId:74,otherPersonId:75,description:"is left to do all the work by"}]},{name:"Zubora",id:75,relations:[{personId:75,otherPersonId:1,description:"accepts commissions from"},{personId:75,otherPersonId:74,description:"lazes about and leaves all the work to"}]},{name:"Fisherman",id:76,relations:[{personId:76,otherPersonId:60,description:"obsesses over the pirate group led by"},{personId:76,otherPersonId:77,description:"owns the"}]},{name:"Seahorse",id:77,relations:[{personId:77,otherPersonId:76,description:"is owned by"},{personId:77,otherPersonId:78,description:"is in a relationship with the"}]},{name:"Pinnacle Rock Seahorse",id:78,relations:[{personId:78,otherPersonId:77,description:"is in a relationship with"}]},{name:"Beaver brothers",id:79,relations:[{personId:79,otherPersonId:1,description:"race"}]},{name:"Mamamu Yan",id:80,relations:[{personId:80,otherPersonId:1,description:"accepts dog race bets from"}]},{name:"Grog",id:81,relations:[{personId:81,otherPersonId:1,description:"is able to watch his chicks grow up thanks to"}]},{name:"Marine Research Lab Professor",id:82,relations:[{personId:82,otherPersonId:70,description:"incubates the"}]},{name:"Captain Keeta",id:83,relations:[{personId:83,otherPersonId:1,description:"is dismissed by"}]},{name:"Shiro",id:84,relations:[{personId:84,otherPersonId:1,description:"gives the Stone Mask to"}]},{name:"Poe Collector",id:85,relations:[{personId:85,otherPersonId:1,description:"bars access to Ikana Canyon from"}]},{name:"Giant turtle",id:86,relations:[{personId:86,otherPersonId:55,description:"is musically summoned by"}]}];let u=[],H=0,y=null,P=document.getElementById("canvas"),p=P.getContext("2d");p.canvas.width=window.innerWidth;p.canvas.height=window.innerHeight;let g=-window.innerWidth/7,b=-window.innerHeight/14;document.addEventListener("keyup",r=>{let e=20;switch(r.key){case"w":b+=e,v();break;case"s":b-=e,v();break;case"a":g+=e,v();break;case"d":g-=20,v();break}});let w=null;P.addEventListener("mousedown",r=>{w=[r.screenX,r.screenY]});P.addEventListener("mousemove",r=>{w!=null&&(g+=r.screenX-w[0],b+=r.screenY-w[1],w=[r.screenX,r.screenY],v())});P.addEventListener("mouseup",r=>{w=null});function R(r){y=r,G(),v()}function C(r){u=[],r.forEach(e=>{u.push(F(e))}),r.forEach(e=>{let s=O(e.id);e.relations.forEach(n=>{s.relations.push(new T(O(n.personId),O(n.otherPersonId),n.description))})})}function F(r){let e=new E;return e.id=r.id,e.name=r.name,e.relations=[],e}function v(){let r=document.getElementById("app");r.innerHTML="",r.appendChild(y.getAnchorTag()),r.appendChild(y.getRelationsDiv()),K()}function K(){p.clearRect(0,0,P.width,P.height),u.forEach(r=>{r.drawToCanvas()})}function G(){let r=[];y.positionOnSpiderDiagram=[P.width/2,P.height/2];let e=-1,s={};u.forEach(n=>{let t=y.getDegreesOfSeparationFrom(n,[]);t>e&&(e=t),Object.keys(s).includes(t+"")?s[t+""]=s[t+""]+1:s[t+""]=1;let c={p:n,degreesFromFocalPerson:t,isAddedToWeb:!1,prevPersonInWeb:null};r.push(c)});for(let n=0;n<=e;n++){let t=[],c=Object.keys(s).includes(n+"")?s[n]*n:1,f=n*400,S=360/c;for(let h=0;h<c;h++){let I=B(S*h),d=Math.sin(I)*f,l=Math.cos(I)*f,a={position:[y.positionOnSpiderDiagram[0]+d,y.positionOnSpiderDiagram[1]+l],occupant:null,distOfOccupantToPrev:999999999};t.push(a)}r.forEach(h=>{if(h.degreesFromFocalPerson==n&&(h.prevPersonInWeb==null&&(h.p.positionOnSpiderDiagram=[P.width/2,P.height/2]),h.isAddedToWeb=!0,h.p.relations.forEach(I=>{for(let d=0;d<r.length;d++){let l=r[d];if(l.p==I.otherPerson){if(l.isAddedToWeb)return;l.prevPersonInWeb=h.p,l.isAddedToWeb=!0}}}),h.prevPersonInWeb!=null)){let I=999999999,d=null,l=999999999,a=null;t.forEach(m=>{let k=L(m.position,h.prevPersonInWeb.positionOnSpiderDiagram);m.occupant!=null&&k<I?(I=k,d=m):m.occupant==null&&k<l&&(l=k,a=m)});let M=!0;if(l<=I)h.p.positionOnSpiderDiagram=a.position,a.distOfOccupantToPrev=l,a.occupant=h;else{let m=d.occupant;d.distOfOccupantToPrev<=I||M?(h.p.positionOnSpiderDiagram=a.position,a.distOfOccupantToPrev=l,a.occupant=h):(console.log(m.p.name+" kicked out of its spot by a better candidate ("+h.p.name+")!"),m.p.positionOnSpiderDiagram=a.position,a.distOfOccupantToPrev=L(m.prevPersonInWeb,m.p.positionOnSpiderDiagram),a.occupant=m,m.p.updateConnectionLinePositions(m.prevPersonInWeb),h.p.positionOnSpiderDiagram=d.position,d.distOfOccupantToPrev=I,d.occupant=h)}h.p.updateConnectionLinePositions(h.prevPersonInWeb)}})}}function L(r,e){return Math.hypot(r[0]-e[0],r[1]-e[1])}function B(r){return r*Math.PI/180}function o(r){r=r.toLowerCase();for(let e=0;e<u.length;e++){let s=u[e];if(s.name.toLowerCase()==r)return s}return console.log("Couldn't find person with name: "+r),null}function O(r){r=parseInt(r);for(let e=0;e<u.length;e++){let s=u[e];if(s.id==r)return s}return null}function x(){let r=u[0];return u.forEach(e=>{e.relations.length>r.relations.length&&(r=e)}),r}function _(){return H++}function i(r){u.push(new E(r))}class E{constructor(e){this.id=_(),this.name=e,this.relations=[],this.positionOnSpiderDiagram=[0,0],this.connectionLineStart=[0,0],this.connectionLineEnd=[0,0],this.connectionTextPosition=[0,0],this.connectionTextWithPrevOnVisualWeb=""}addRelation(e,s,n,t){this.relations.push(new T(this,e,s)),t&&e.relations.push(new T(e,this,n))}getAnchorTag(){let e=document.createElement("a");return e.innerHTML="<strong>"+this.name+"</strong>",e.onclick=()=>{R(this)},e}getRelationsDiv(){let e=document.createElement("ul");return this.relations.forEach(s=>{let n=document.createElement("li"),t=document.createElement("a");t.innerHTML=s.description+" <strong>"+(s.otherPerson==this?"themselves":s.otherPerson.name)+"</strong>",t.onclick=()=>{R(s.otherPerson)},n.appendChild(t),e.appendChild(n)}),e}getImmediateRelationshipTextTo(e){let s="is not immediately related to";return this.relations.forEach(n=>{n.otherPerson==e&&(s=n.description)}),s}updateConnectionLinePositions(e){let s=this.positionOnSpiderDiagram[0]-e.positionOnSpiderDiagram[0],n=this.positionOnSpiderDiagram[1]-e.positionOnSpiderDiagram[1];this.connectionLineStart=[this.positionOnSpiderDiagram[0]-s/15,this.positionOnSpiderDiagram[1]-n/15],this.connectionLineEnd=[this.positionOnSpiderDiagram[0]-s*(9/10),this.positionOnSpiderDiagram[1]-n*(9/10)],this.connectionTextPosition=[this.positionOnSpiderDiagram[0]-s/2,this.positionOnSpiderDiagram[1]-n/2],s<0?this.connectionTextWithPrevOnVisualWeb=e.getImmediateRelationshipTextTo(this):this.connectionTextWithPrevOnVisualWeb=e.getImmediateRelationshipTextTo(this),this.connectionTextAngle=Math.atan(s,n)}drawToCanvas(){p.beginPath(),p.arc(g+this.positionOnSpiderDiagram[0],b+this.positionOnSpiderDiagram[1],50,0,2*Math.PI),p.fillStyle="black",p.font="20px Arial",p.fillStyle="white",p.textAlign="center",p.textBaseline="middle",p.fillText(this.name,g+this.positionOnSpiderDiagram[0],b+this.positionOnSpiderDiagram[1]),p.beginPath(),p.strokeStyle="rgba(128,128,128,0.3)",p.moveTo(g+this.connectionLineStart[0],b+this.connectionLineStart[1]),p.lineTo(g+this.connectionLineEnd[0],b+this.connectionLineEnd[1]),p.stroke(),p.font="12px Arial",p.fillStyle="rgba(255,255,255,0.75)",p.textAlign="center",p.textBaseline="middle",p.save(),p.translate(g+this.connectionTextPosition[0],b+this.connectionTextPosition[1]);let e=this.connectionTextAngle;for(;e>Math.PI;)e-=Math.PI*2;for(;e<-Math.PI;)e+=Math.PI*2;e>=Math.PI||e<0?p.rotate(-e-1.5708):p.rotate(-e+1.5708),p.fillText(this.connectionTextWithPrevOnVisualWeb,0,0),p.restore()}getAsObjectForJSON(){let e=Array(this.relations.length);for(let s=0;s<this.relations.length;s++)e[s]=this.relations[s].getJSONFriendlyVersion();return{name:this.name,id:this.id,relations:e}}getDegreesOfSeparationFrom(e,s){if(e==this)return 0;if(s==null)s=[];else for(let d=0;d<s.length;d++)s[d]=s[d].id;let n={},t={},c=[];n[this.id]=0,t[this.id]=null;let f=!1,S=5e3,h=0;for(;!f&&c.length!=Object.keys(n).length&&!(h>S);){let d=99999999999,l=null;Object.keys(n).forEach(a=>{n[a]<d&&!c.includes(a)&&(d=n[a],l=a)}),c.push(l),O(l).relations.forEach(a=>{!Object.keys(n).includes(a.otherPerson.id+"")&&!s.includes(a.otherPerson.id)&&(n[a.otherPerson.id]=d+1,t[a.otherPerson.id]=O(l),a.otherPerson==e&&(f=!0))}),h++}let I=this.name+" is "+n[e.id]+" degrees away from "+e.name+".";if(s.length>0&&(I+=D(s)),I+=`
`,f){let d=e,l=t[e.id],a=!0;for(;l!=null;){if(I+=d.name+(a?" ":", who ")+d.getImmediateRelationshipTextTo(l),l==this){I+=" "+this.name+".";break}else I+=" ";d=l,l=t[d.id],a=!1}}else I=this.name+" is not connected to "+e.name,s.length>0&&(I+=D(s));return n[e.id]}}function D(r){let e="";return r.length>0&&(e+=" (Avoiding: ",r.forEach(s=>{e+=O(s).name+" "}),e+=")"),e}class T{constructor(e,s,n){this.person=e,this.otherPerson=s,this.description=n}getJSONFriendlyVersion(){return{personId:this.person.id,otherPersonId:this.otherPerson.id,description:this.description}}}i("Hamlet");i("King Claudius");i("Polonius");i("Horatio");i("Laertes");i("Lucianus");i("Voltimand");i("Cornelius");i("Rosencrantz");i("Guildenstern");i("Osric");i("Gentleman");i("Priest");i("Marcellus");i("Bernardo");i("Francisco");i("Reynaldo");i("Players");i("Clowns");i("Fortinbras");i("Captain");i("English Ambassadors");i("Queen Gertrude");i("Ophelia");i("King Hamlet");i("Old King Fortinbras");i("Yorick");o("Hamlet").addRelation(o("King Claudius"),"despises","is despised by",!0);o("Hamlet").addRelation(o("Horatio"),"is friends with","is friends with",!0);o("Hamlet").addRelation(o("Polonius"),"mortally wounds","is stabbed through a curtain by",!0);o("Hamlet").addRelation(o("Laertes"),"duels","duels",!0);o("Hamlet").addRelation(o("Queen Gertrude"),"is the son of","is the mother of",!0);o("Hamlet").addRelation(o("King Hamlet"),"is the son of","was the father of",!0);o("Queen Gertrude").addRelation(o("King Claudius"),"is the wife of","is husband to",!0);o("Queen Gertrude").addRelation(o("King Hamlet"),"was the wife of","was husband to",!0);o("Old King Fortinbras").addRelation(o("King Hamlet"),"was defeated by","once defeated",!0);o("Ophelia").addRelation(o("Hamlet"),"is potentially in love with","is potentially in love with",!0);o("Ophelia").addRelation(o("Polonius"),"is the daughter of","is the father of",!0);o("Laertes").addRelation(o("Polonius"),"is the daughter of","is the father of",!0);o("Laertes").addRelation(o("Ophelia"),"is the brother of","is sister to",!0);o("Osric").addRelation(o("Laertes"),"oversees a duel for","participates in a duel overseen by",!0);o("Osric").addRelation(o("Hamlet"),"oversees a duel for","participates in a duel overseen by",!0);o("Francisco").addRelation(o("Marcellus"),"guards Elsinore alongside","guards Elsinore alongside",!0);o("Francisco").addRelation(o("Bernardo"),"guards Elsinore alongside","guards Elsinore alongside",!0);o("Marcellus").addRelation(o("Bernardo"),"guards Elsinore alongside","guards Elsinore alongside",!0);o("Marcellus").addRelation(o("King Hamlet"),"sees a ghost resembling","is seen roaming the battlements by",!0);o("Bernardo").addRelation(o("King Hamlet"),"sees a ghost resembling","is seen roaming the battlements by",!0);o("Marcellus").addRelation(o("Horatio"),"brings ghost-related information to","is told about a ghost on the battlements by",!0);o("Marcellus").addRelation(o("Hamlet"),"brings ghost-related information to","is told about his father's ghost by",!0);o("Gentleman").addRelation(o("Ophelia"),"witnesses madness in","exhibits madness in the presence of",!0);o("Gentleman").addRelation(o("Queen Gertrude"),"speaks of Ophelia's madness to","is told about Ophelia's madness by",!0);o("Rosencrantz").addRelation(o("Hamlet"),"is a childhood friend of","is a childhood friend of",!0);o("Guildenstern").addRelation(o("Hamlet"),"is a childhood friend of","is a childhood friend of",!0);o("Rosencrantz").addRelation(o("King Claudius"),"is secretly working for","is secretly employing",!0);o("Guildenstern").addRelation(o("King Claudius"),"is secretly working for","is secretly employing",!0);o("Fortinbras").addRelation(o("Old King Fortinbras"),"is the son of","was the father of",!0);o("Fortinbras").addRelation(o("Hamlet"),"assumes the throne of Denmark after the death of","loses the throne of Denmark to",!0);o("Reynaldo").addRelation(o("Polonius"),"is instructed to spy on Laertes by","entrusts a spying mission to",!0);o("Reynaldo").addRelation(o("Laertes"),"spies on Laertes","is spied on by",!0);o("Players").addRelation(o("Hamlet"),"perform a modified play devised by","devises a modified play to be performed by the",!0);o("Players").addRelation(o("King Claudius"),"inadvertently spook","is shocked at seeing his crime re-enacted by the",!0);o("Yorick").addRelation(o("Hamlet"),"has his skull spoken to by","regrets the death of",!0);o("Clowns").addRelation(o("Ophelia"),"dig a grave for","is buried by the",!0);o("Clowns").addRelation(o("Hamlet"),"trade witticisms with","trades witticisms with the",!0);o("English Ambassadors").addRelation(o("Rosencrantz"),"report the death of","is reported dead by",!0);o("English Ambassadors").addRelation(o("Guildenstern"),"report the death of","is reported dead by",!0);C(A);R(x());
