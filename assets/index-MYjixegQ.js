(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}})();let y=[],C=0,S=null,b=document.getElementById("canvas"),u=b.getContext("2d");u.canvas.width=window.innerWidth;u.canvas.height=window.innerHeight;let f=-window.innerWidth/7,R=-window.innerHeight/14;document.addEventListener("keyup",n=>{let i=20;switch(n.key){case"w":R+=i,L();break;case"s":R-=i,L();break;case"a":f+=i,L();break;case"d":f-=20,L();break}});let O=null;b.addEventListener("mousedown",n=>{O=[n.screenX,n.screenY]});b.addEventListener("mousemove",n=>{O!=null&&(f+=n.screenX-O[0],R+=n.screenY-O[1],O=[n.screenX,n.screenY],L())});b.addEventListener("mouseup",n=>{O=null});function E(){C=0,y=[]}function v(n){S=n,N(),L()}function L(){let n=document.getElementById("app");n.innerHTML="",n.appendChild(S.getAnchorTag()),n.appendChild(S.getRelationsDiv()),H()}function H(){u.clearRect(0,0,b.width,b.height),y.forEach(n=>{n.drawToCanvas()})}function N(){let n=[],i=-1,a={};y.forEach(r=>{let o=S.getDegreesOfSeparationFrom(r,[]);o>i&&(i=o),Object.keys(a).includes(o+"")?a[o+""]=a[o+""]+1:a[o+""]=1;let c={p:r,degreesFromFocalPerson:o,isAddedToWeb:!1,prevPersonInWeb:null};n.push(c)});for(let r=0;r<=i;r++){let o=[],c=Object.keys(a).includes(r+"")?a[r]*r:1,p=r*400,D=360/c;for(let d=0;d<c;d++){let m=W(D*d),s=Math.sin(m)*p,h=Math.cos(m)*p,l={position:[S.positionOnSpiderDiagram[0]+s,S.positionOnSpiderDiagram[1]+h],occupant:null,distOfOccupantToPrev:999999999};o.push(l)}n.forEach(d=>{if(d.degreesFromFocalPerson==r){if(d.prevPersonInWeb==null&&(d.p.positionOnSpiderDiagram=[b.width/2,b.height/2]),d.isAddedToWeb=!0,d.p.relations.forEach(m=>{for(let s=0;s<n.length;s++){let h=n[s];if(h.p==m.otherPerson){if(h.isAddedToWeb)return;h.prevPersonInWeb=d.p,h.isAddedToWeb=!0}}}),d.prevPersonInWeb!=null){let m=999999999,s=null,h=999999999,l=null;o.forEach(g=>{let P=T(g.position,d.prevPersonInWeb.positionOnSpiderDiagram);g.occupant!=null&&P<m?(m=P,s=g):g.occupant==null&&P<h&&(h=P,l=g)});let k=!0;if(h<=m)d.p.positionOnSpiderDiagram=l.position,l.distOfOccupantToPrev=h,l.occupant=d;else{let g=s.occupant;s.distOfOccupantToPrev<=m||k?(d.p.positionOnSpiderDiagram=l.position,l.distOfOccupantToPrev=h,l.occupant=d):(console.log(g.p.name+" kicked out of its spot by a better candidate ("+d.p.name+")!"),g.p.positionOnSpiderDiagram=l.position,l.distOfOccupantToPrev=T(g.prevPersonInWeb,g.p.positionOnSpiderDiagram),l.occupant=g,g.p.updateConnectionLinePositions(g.prevPersonInWeb),d.p.positionOnSpiderDiagram=s.position,s.distOfOccupantToPrev=m,s.occupant=d)}}d.p.updateConnectionLinePositions(d.prevPersonInWeb)}})}}function T(n,i){return Math.hypot(n[0]-i[0],n[1]-i[1])}function W(n){return n*Math.PI/180}function e(n){n=n.toLowerCase();for(let i=0;i<y.length;i++){let a=y[i];if(a.name.toLowerCase()==n)return a}return console.log("Couldn't find person with name: "+n),null}function w(n){n=parseInt(n);for(let i=0;i<y.length;i++){let a=y[i];if(a.id==n)return a}return null}function I(){return C++}function t(n){y.push(new V(n))}class V{constructor(i){this.id=I(),this.name=i,this.relations=[],this.positionOnSpiderDiagram=[0,0],this.connectionLineStart=[0,0],this.connectionLineEnd=[0,0],this.connectionTextPosition=[0,0],this.connectionTextWithPrevOnVisualWeb=""}addRelation(i,a,r,o){this.relations.push(new M(this,i,a)),o&&i.relations.push(new M(i,this,r))}getAnchorTag(){let i=document.createElement("a");return i.innerHTML="<strong>"+this.name+"</strong>",i.onclick=()=>{v(this)},i}getRelationsDiv(){let i=document.createElement("ul");return this.relations.forEach(a=>{let r=document.createElement("li"),o=document.createElement("a");o.innerHTML=a.description+" <strong>"+(a.otherPerson==this?"themselves":a.otherPerson.name)+"</strong>",o.onclick=()=>{v(a.otherPerson)},r.appendChild(o),i.appendChild(r)}),i}getImmediateRelationshipTextTo(i){let a="is not immediately related to";return this.relations.forEach(r=>{r.otherPerson==i&&(a=r.description)}),a}updateConnectionLinePositions(i){let a=0,r=0;i!=null?(a=this.positionOnSpiderDiagram[0]-i.positionOnSpiderDiagram[0],r=this.positionOnSpiderDiagram[1]-i.positionOnSpiderDiagram[1],this.connectionLineStart=[this.positionOnSpiderDiagram[0]-a/15,this.positionOnSpiderDiagram[1]-r/15],this.connectionLineEnd=[this.positionOnSpiderDiagram[0]-a*(9/10),this.positionOnSpiderDiagram[1]-r*(9/10)],this.connectionTextPosition=[this.positionOnSpiderDiagram[0]-a/2,this.positionOnSpiderDiagram[1]-r/2],a<0?this.connectionTextWithPrevOnVisualWeb=i.getImmediateRelationshipTextTo(this):this.connectionTextWithPrevOnVisualWeb=i.getImmediateRelationshipTextTo(this),this.connectionTextAngle=Math.atan(a,r)):this.connectionTextWithPrevOnVisualWeb=null}drawToCanvas(){u.beginPath(),u.arc(f+this.positionOnSpiderDiagram[0],R+this.positionOnSpiderDiagram[1],50,0,2*Math.PI),u.fillStyle="black",u.font="20px Arial",u.fillStyle="white",u.textAlign="center",u.textBaseline="middle",u.fillText(this.name,f+this.positionOnSpiderDiagram[0],R+this.positionOnSpiderDiagram[1]),this.connectionTextWithPrevOnVisualWeb!=null&&(u.beginPath(),u.strokeStyle="rgba(128,128,128,0.3)",u.moveTo(f+this.connectionLineStart[0],R+this.connectionLineStart[1]),u.lineTo(f+this.connectionLineEnd[0],R+this.connectionLineEnd[1]),u.stroke(),u.font="12px Arial",u.fillStyle="rgba(255,255,255,0.75)",u.textAlign="center",u.textBaseline="middle",u.save(),u.translate(f+this.connectionTextPosition[0],R+this.connectionTextPosition[1]),this.connectionTextAngle,this.connectionTextWithPrevOnVisualWeb!=null&&u.fillText(this.connectionTextWithPrevOnVisualWeb,0,0),u.restore())}getAsObjectForJSON(){let i=Array(this.relations.length);for(let a=0;a<this.relations.length;a++)i[a]=this.relations[a].getJSONFriendlyVersion();return{name:this.name,id:this.id,relations:i}}getDegreesOfSeparationFrom(i,a){if(i==this)return 0;if(a==null)a=[];else for(let s=0;s<a.length;s++)a[s]=a[s].id;let r={},o={},c=[];r[this.id]=0,o[this.id]=null;let p=!1,D=5e3,d=0;for(;!p&&c.length!=Object.keys(r).length&&!(d>D);){let s=99999999999,h=null;Object.keys(r).forEach(l=>{r[l]<s&&!c.includes(l)&&(s=r[l],h=l)}),c.push(h),w(h).relations.forEach(l=>{!Object.keys(r).includes(l.otherPerson.id+"")&&!a.includes(l.otherPerson.id)&&(r[l.otherPerson.id]=s+1,o[l.otherPerson.id]=w(h),l.otherPerson==i&&(p=!0))}),d++}let m=this.name+" is "+r[i.id]+" degrees away from "+i.name+".";if(a.length>0&&(m+=A(a)),m+=`
`,p){let s=i,h=o[i.id],l=!0;for(;h!=null;){if(m+=s.name+(l?" ":", who ")+s.getImmediateRelationshipTextTo(h),h==this){m+=" "+this.name+".";break}else m+=" ";s=h,h=o[s.id],l=!1}}else m=this.name+" is not connected to "+i.name,a.length>0&&(m+=A(a));return r[i.id]}}function A(n){let i="";return n.length>0&&(i+=" (Avoiding: ",n.forEach(a=>{i+=w(a).name+" "}),i+=")"),i}class M{constructor(i,a,r){this.person=i,this.otherPerson=a,this.description=r}getJSONFriendlyVersion(){return{personId:this.person.id,otherPersonId:this.otherPerson.id,description:this.description}}}t("Hamlet");t("King Claudius");t("Polonius");t("Horatio");t("Laertes");t("Lucianus");t("Voltimand");t("Cornelius");t("Rosencrantz");t("Guildenstern");t("Osric");t("Gentleman");t("Priest");t("Marcellus");t("Bernardo");t("Francisco");t("Reynaldo");t("Players");t("Clowns");t("Fortinbras");t("Captain");t("English Ambassadors");t("Queen Gertrude");t("Ophelia");t("King Hamlet");t("Old King Fortinbras");t("Yorick");e("Hamlet").addRelation(e("King Claudius"),"despises","is despised by",!0);e("Hamlet").addRelation(e("Horatio"),"is friends with","is friends with",!0);e("Hamlet").addRelation(e("Polonius"),"mortally wounds","is stabbed through a curtain by",!0);e("Hamlet").addRelation(e("Laertes"),"duels","duels",!0);e("Hamlet").addRelation(e("Queen Gertrude"),"is the son of","is the mother of",!0);e("Hamlet").addRelation(e("King Hamlet"),"is the son of","was the father of",!0);e("Queen Gertrude").addRelation(e("King Claudius"),"is the wife of","is husband to",!0);e("Queen Gertrude").addRelation(e("King Hamlet"),"was the wife of","was husband to",!0);e("Old King Fortinbras").addRelation(e("King Hamlet"),"was defeated by","once defeated",!0);e("Ophelia").addRelation(e("Hamlet"),"is potentially in love with","is potentially in love with",!0);e("Ophelia").addRelation(e("Polonius"),"is the daughter of","is the father of",!0);e("Laertes").addRelation(e("Polonius"),"is the daughter of","is the father of",!0);e("Laertes").addRelation(e("Ophelia"),"is the brother of","is sister to",!0);e("Osric").addRelation(e("Laertes"),"oversees a duel for","participates in a duel overseen by",!0);e("Osric").addRelation(e("Hamlet"),"oversees a duel for","participates in a duel overseen by",!0);e("Francisco").addRelation(e("Marcellus"),"guards Elsinore alongside","guards Elsinore alongside",!0);e("Francisco").addRelation(e("Bernardo"),"guards Elsinore alongside","guards Elsinore alongside",!0);e("Marcellus").addRelation(e("Bernardo"),"guards Elsinore alongside","guards Elsinore alongside",!0);e("Marcellus").addRelation(e("King Hamlet"),"sees a ghost resembling","is seen roaming the battlements by",!0);e("Bernardo").addRelation(e("King Hamlet"),"sees a ghost resembling","is seen roaming the battlements by",!0);e("Marcellus").addRelation(e("Horatio"),"brings ghost-related information to","is told about a ghost on the battlements by",!0);e("Marcellus").addRelation(e("Hamlet"),"brings ghost-related information to","is told about his father's ghost by",!0);e("Gentleman").addRelation(e("Ophelia"),"witnesses madness in","exhibits madness in the presence of",!0);e("Gentleman").addRelation(e("Queen Gertrude"),"speaks of Ophelia's madness to","is told about Ophelia's madness by",!0);e("Rosencrantz").addRelation(e("Hamlet"),"is a childhood friend of","is a childhood friend of",!0);e("Guildenstern").addRelation(e("Hamlet"),"is a childhood friend of","is a childhood friend of",!0);e("Rosencrantz").addRelation(e("King Claudius"),"is secretly working for","is secretly employing",!0);e("Guildenstern").addRelation(e("King Claudius"),"is secretly working for","is secretly employing",!0);e("Fortinbras").addRelation(e("Old King Fortinbras"),"is the son of","was the father of",!0);e("Fortinbras").addRelation(e("Hamlet"),"assumes the throne of Denmark after the death of","loses the throne of Denmark to",!0);e("Reynaldo").addRelation(e("Polonius"),"is instructed to spy on Laertes by","entrusts a spying mission to",!0);e("Reynaldo").addRelation(e("Laertes"),"spies on Laertes","is spied on by",!0);e("Players").addRelation(e("Hamlet"),"perform a modified play devised by","devises a modified play to be performed by the",!0);e("Players").addRelation(e("King Claudius"),"inadvertently spook","is shocked at seeing his crime re-enacted by the",!0);e("Yorick").addRelation(e("Hamlet"),"has his skull spoken to by","regrets the death of",!0);e("Clowns").addRelation(e("Ophelia"),"dig a grave for","is buried by the",!0);e("Clowns").addRelation(e("Hamlet"),"trade witticisms with","trades witticisms with the",!0);e("English Ambassadors").addRelation(e("Rosencrantz"),"report the death of","is reported dead by",!0);e("English Ambassadors").addRelation(e("Guildenstern"),"report the death of","is reported dead by",!0);E();t("Prince Lady el Diablo");t("Lady Carrington"),t("Axel Warden"),t("Henry Passmore"),t("Nollaig Archemboult"),t("Keir of Haworth"),t("Viceroy Mircalla Lee"),t("Ebony Webb"),t("Cora Gettins"),t("Maya Thornstep"),t("Backbone"),t("Celda Themis"),t("Jane Bodkin Adams"),t("Isadora Jones"),t("Zoey Walker"),t("Pete"),t("Christopher Demott"),t("Levi Rose"),t("Willow Warneford"),t("Kai Smith"),t("Chester Willard"),t("Lord Marcae"),t("Barty Crane"),t("Oswald Numeon"),t("Robert Whyteside"),t("Gwenyth Meredith"),t("Isaac Sterling"),t("Stargazer Fairfax"),t("Theodore James"),t("Lykofron"),t("Mr Hawthorn"),t("Father Ward"),t("Alice Maddocks"),t("Orpheus Renwick"),t("Skitter"),t("Agis IV"),t("Nyk Mekhane"),t("Mr Streed"),t("Pine"),t("Penrose"),t("Harley Edwards"),t("Lady Divinnia"),t("Lyrik"),t("Vivian Astor");t("Johann Stieber"),t("Lysander"),t("Tiddles McSweenie"),t("Ethel Cabbage"),e("Lady Carrington").addRelation(e("Viceroy Mircalla Lee"),"Viceroy","Seneschal",!0);e("Lady Carrington").addRelation(e("Nollaig Archemboult"),"Dominar","Seneschal",!0);e("Lady Carrington").addRelation(e("Gwenyth Meredith"),"Bishop","Seneschal",!0);e("Lady Carrington").addRelation(e("Levi Rose"),"Ospite","Seneschal",!0);e("Lady Carrington").addRelation(e("Henry Passmore"),"Hierophant","Seneschal",!0);e("Lady Carrington").addRelation(e("Isaac Sterling"),"Obi","Seneschal",!0);e("Lady Carrington").addRelation(e("Ebony Webb"),"Convener","Seneschal",!0);e("Lady Carrington").addRelation(e("Theodore James"),"Alpha","Seneschal",!0);e("Lady Carrington").addRelation(e("Cora Gettins"),"Prefect","Seneschal",!0);e("Lady Carrington").addRelation(e("Mr Streed"),"Custodes","Seneschal",!0);e("Prince Lady el Diablo").addRelation(e("Mr Hawthorn"),"Sheriff","Prince",!0);e("Prince Lady el Diablo").addRelation(e("Maya Thornstep"),"Harpy","Prince",!0);e("Prince Lady el Diablo").addRelation(e("Axel Warden"),"Master of Elysium","Prince",!0);e("Prince Lady el Diablo").addRelation(e("Skitter"),"Herald","Prince",!0);e("Prince Lady el Diablo").addRelation(e("Lady Carrington"),"Seneschal","Prince",!0);e("Mr Hawthorn").addRelation(e("Maya Thornstep"),"Hound","Prince",!0);e("Axel Warden").addRelation(e("Nyk Mekhane"),"Champion","Prince",!0);e("Isaac Sterling").addRelation(e("Oswald Numeon"),"Mekhet","Obi",!0);e("Isaac Sterling").addRelation(e("Robert Whyteside"),"Mekhet","Obi",!0);e("Isaac Sterling").addRelation(e("Gwenyth Meredith"),"Mekhet","Obi",!0);e("Isaac Sterling").addRelation(e("Isaac Sterling"),"Mekhet","Obi",!0);e("Mr Streed").addRelation(e("Orpheus Renwick"),"Nosferatu","Custodes",!0);e("Mr Streed").addRelation(e("Skitter"),"Nosferatu","Custodes",!0);e("Mr Streed").addRelation(e("Agis IV"),"Nosferatu","Custodes",!0);e("Mr Streed").addRelation(e("Nyk Mekhane"),"Nosferatu","Custodes",!0);e("Mr Streed").addRelation(e("Mr Streed"),"Nosferatu","Custodes",!0);e("Mr Streed").addRelation(e("Pine"),"Nosferatu","Custodes",!0);e("Theodore James").addRelation(e("Stargazer Fairfax"),"Gangrel","Alpha",!0);e("Theodore James").addRelation(e("Theodore James"),"Gangrel","Alpha",!0);e("Theodore James").addRelation(e("Lykofron"),"Gangrel","Alpha",!0);e("Theodore James").addRelation(e("Mr Hawthorn"),"Gangrel","Alpha",!0);e("Theodore James").addRelation(e("Father Ward"),"Gangrel","Alpha",!0);e("Theodore James").addRelation(e("Alice Maddocks"),"Gangrel","Alpha",!0);e("Theodore James").addRelation(e("Ethel Cabbage"),"Gangrel","Alpha",!0);e("Levi Rose").addRelation(e("Zoey Walker"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Pete"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Christopher Demott"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Levi Rose"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Willow Warneford"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Kai Smith"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Chester Willard"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Lord Marcae"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Barty Crane"),"Daeva","Ospite",!0);e("Levi Rose").addRelation(e("Axel Warden"),"Daeva","Ospite",!0);e("Nollaig Archemboult").addRelation(e("Keir of Haworth"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Viceroy Mircalla Lee"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Lady Carrington"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Ebony Webb"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Cora Gettins"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Maya Thornstep"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Backbone"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Celda Themis"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Jane Bodkin Adams"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Isadora Jones"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Nollaig Archemboult"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Lady Carrington"),"Ventrue","Dominar",!0);e("Nollaig Archemboult").addRelation(e("Prince Lady el Diablo"),"Ventrue","Dominar",!0);v(w(1));
